{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Elli0t/richard/lib/db.ts"],"sourcesContent":["import { createClient } from '@libsql/client';\r\n\r\nconst client = createClient({\r\n  url: process.env.TURSO_DATABASE_URL!,\r\n  authToken: process.env.TURSO_AUTH_TOKEN,\r\n});\r\n\r\nexport default client;"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,SAAS,IAAA,oJAAY,EAAC;IAC1B,KAAK,QAAQ,GAAG,CAAC,kBAAkB;IACnC,WAAW,QAAQ,GAAG,CAAC,gBAAgB;AACzC;uCAEe"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Elli0t/richard/app/actions/auth.ts"],"sourcesContent":["'use server'\r\n\r\nimport bcrypt from 'bcryptjs'\r\nimport client from '@/lib/db'\r\nimport { cookies } from 'next/headers'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport async function registerUser(formData: FormData) {\r\n  const email = formData.get('email') as string\r\n  const password = formData.get('password') as string\r\n\r\n  if (!email || !password) {\r\n    return { error: 'Email and password are required' }\r\n  }\r\n\r\n  try {\r\n    // Check if user exists\r\n    const existingUser = await client.execute({\r\n      sql: 'SELECT id FROM users WHERE email = ?',\r\n      args: [email]\r\n    })\r\n\r\n    if (existingUser.rows.length > 0) {\r\n      return { error: 'User already exists' }\r\n    }\r\n\r\n    // Hash password\r\n    const passwordHash = await bcrypt.hash(password, 10)\r\n\r\n    // Insert user\r\n    const result = await client.execute({\r\n      sql: 'INSERT INTO users (email, password_hash) VALUES (?, ?)',\r\n      args: [email, passwordHash]\r\n    })\r\n\r\n    const userId = result.lastInsertRowid as bigint\r\n\r\n    // Set cookie for session\r\n    const cookieStore = await cookies()\r\n    cookieStore.set('user_id', userId.toString(), {\r\n      httpOnly: true,\r\n      secure: process.env.NODE_ENV === 'production',\r\n      maxAge: 60 * 60 * 24 * 7 // 7 days\r\n    })\r\n\r\n    return { success: true, userId: userId.toString() }\r\n  } catch (error) {\r\n    console.error('Registration error:', error)\r\n    return { error: 'Failed to register user' }\r\n  }\r\n}\r\n\r\nexport async function loginUser(formData: FormData) {\r\n  const email = formData.get('email') as string\r\n  const password = formData.get('password') as string\r\n\r\n  if (!email || !password) {\r\n    return { error: 'Email and password are required' }\r\n  }\r\n\r\n  try {\r\n    // Get user\r\n    const result = await client.execute({\r\n      sql: 'SELECT id, password_hash FROM users WHERE email = ?',\r\n      args: [email]\r\n    })\r\n\r\n    if (result.rows.length === 0) {\r\n      return { error: 'Invalid credentials' }\r\n    }\r\n\r\n    const user = result.rows[0] as unknown as { id: number; password_hash: string }\r\n    const isValidPassword = await bcrypt.compare(password, user.password_hash)\r\n\r\n    if (!isValidPassword) {\r\n      return { error: 'Invalid credentials' }\r\n    }\r\n\r\n    // Set cookie\r\n    const cookieStore = await cookies()\r\n    cookieStore.set('user_id', user.id.toString(), {\r\n      httpOnly: true,\r\n      secure: process.env.NODE_ENV === 'production',\r\n      maxAge: 60 * 60 * 24 * 7\r\n    })\r\n\r\n    return { success: true, userId: user.id }\r\n  } catch (error) {\r\n    console.error('Login error:', error)\r\n    return { error: 'Failed to login' }\r\n  }\r\n}\r\n\r\nexport async function logoutUser() {\r\n  const cookieStore = await cookies()\r\n  cookieStore.delete('user_id')\r\n  redirect('/login')\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n  const cookieStore = await cookies()\r\n  const userId = cookieStore.get('user_id')?.value\r\n\r\n  if (!userId) {\r\n    return null\r\n  }\r\n\r\n  try {\r\n    const result = await client.execute({\r\n      sql: 'SELECT id, email, created_at FROM users WHERE id = ?',\r\n      args: [parseInt(userId)]\r\n    })\r\n\r\n    if (result.rows.length === 0) {\r\n      return null\r\n    }\r\n\r\n    return result.rows[0] as unknown as { id: number; email: string; created_at: string }\r\n  } catch (error) {\r\n    console.error('Get user error:', error)\r\n    return null\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Elli0t/richard/app/actions/orders.ts"],"sourcesContent":["'use server'\r\n\r\nimport client from '@/lib/db'\r\nimport { cookies } from 'next/headers'\r\nimport { CartItem } from '@/lib/cart-store'\r\n\r\nexport async function saveOrder(formData: FormData) {\r\n  const email = formData.get('email') as string\r\n  const discordUsername = formData.get('discordUsername') as string\r\n  const notes = formData.get('notes') as string\r\n  const total = parseFloat(formData.get('total') as string)\r\n  const proofImage = formData.get('proofImage') as string\r\n  const itemsJson = formData.get('items') as string\r\n\r\n  if (!email || !proofImage || !itemsJson) {\r\n    return { error: 'Missing required fields' }\r\n  }\r\n\r\n  let items: CartItem[]\r\n  try {\r\n    items = JSON.parse(itemsJson)\r\n  } catch {\r\n    return { error: 'Invalid items data' }\r\n  }\r\n\r\n  if (items.length === 0) {\r\n    return { error: 'No items in order' }\r\n  }\r\n\r\n  try {\r\n    // Get user_id from cookie if logged in\r\n    const cookieStore = await cookies()\r\n    const userIdCookie = cookieStore.get('user_id')?.value\r\n    const userId = userIdCookie ? parseInt(userIdCookie) : null\r\n\r\n    // Generate order_id\r\n    const orderId = `FL-${Date.now()}`\r\n\r\n    // Insert order\r\n    const orderResult = await client.execute({\r\n      sql: `INSERT INTO orders (user_id, email, discord_username, notes, total, proof_image, order_id)\r\n            VALUES (?, ?, ?, ?, ?, ?, ?)`,\r\n      args: [userId, email, discordUsername || null, notes || null, total, proofImage, orderId]\r\n    })\r\n\r\n    const orderDbId = orderResult.lastInsertRowid as bigint\r\n\r\n    // Insert order items\r\n    for (const item of items) {\r\n      await client.execute({\r\n        sql: 'INSERT INTO order_items (order_id, game, duration, price) VALUES (?, ?, ?, ?)',\r\n        args: [orderDbId, item.game, item.duration, item.price]\r\n      })\r\n    }\r\n\r\n    return { success: true, orderId }\r\n  } catch (error) {\r\n    console.error('Save order error:', error)\r\n    return { error: 'Failed to save order' }\r\n  }\r\n}\r\n\r\nexport async function getUserOrders() {\r\n  const cookieStore = await cookies()\r\n  const userId = cookieStore.get('user_id')?.value\r\n\r\n  if (!userId) {\r\n    return { error: 'Not authenticated' }\r\n  }\r\n\r\n  try {\r\n    // Get orders\r\n    const ordersResult = await client.execute({\r\n      sql: `SELECT o.id, o.email, o.discord_username, o.notes, o.total, o.proof_image,\r\n                   o.status, o.order_id, o.created_at\r\n            FROM orders o\r\n            WHERE o.user_id = ?\r\n            ORDER BY o.created_at DESC`,\r\n      args: [parseInt(userId)]\r\n    })\r\n\r\n    const orders = []\r\n\r\n    for (const orderRow of ordersResult.rows) {\r\n      const order = orderRow as unknown as {\r\n        id: number\r\n        email: string\r\n        discord_username: string | null\r\n        notes: string | null\r\n        total: number\r\n        proof_image: string\r\n        status: string\r\n        order_id: string\r\n        created_at: string\r\n      }\r\n\r\n      // Get items for this order\r\n      const itemsResult = await client.execute({\r\n        sql: 'SELECT game, duration, price FROM order_items WHERE order_id = ?',\r\n        args: [order.id]\r\n      })\r\n\r\n      const items = itemsResult.rows.map(item => item as unknown as {\r\n        game: string\r\n        duration: string\r\n        price: number\r\n      })\r\n\r\n      orders.push({\r\n        ...order,\r\n        items\r\n      })\r\n    }\r\n\r\n    return { success: true, orders }\r\n  } catch (error) {\r\n    console.error('Get orders error:', error)\r\n    return { error: 'Failed to get orders' }\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;;;;;;AAGO,eAAe,UAAU,QAAkB;IAChD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,kBAAkB,SAAS,GAAG,CAAC;IACrC,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,QAAQ,WAAW,SAAS,GAAG,CAAC;IACtC,MAAM,aAAa,SAAS,GAAG,CAAC;IAChC,MAAM,YAAY,SAAS,GAAG,CAAC;IAE/B,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,WAAW;QACvC,OAAO;YAAE,OAAO;QAA0B;IAC5C;IAEA,IAAI;IACJ,IAAI;QACF,QAAQ,KAAK,KAAK,CAAC;IACrB,EAAE,OAAM;QACN,OAAO;YAAE,OAAO;QAAqB;IACvC;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,IAAI;QACF,uCAAuC;QACvC,MAAM,cAAc,MAAM,IAAA,oRAAO;QACjC,MAAM,eAAe,YAAY,GAAG,CAAC,YAAY;QACjD,MAAM,SAAS,eAAe,SAAS,gBAAgB;QAEvD,oBAAoB;QACpB,MAAM,UAAU,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;QAElC,eAAe;QACf,MAAM,cAAc,MAAM,+HAAM,CAAC,OAAO,CAAC;YACvC,KAAK,CAAC;wCAC4B,CAAC;YACnC,MAAM;gBAAC;gBAAQ;gBAAO,mBAAmB;gBAAM,SAAS;gBAAM;gBAAO;gBAAY;aAAQ;QAC3F;QAEA,MAAM,YAAY,YAAY,eAAe;QAE7C,qBAAqB;QACrB,KAAK,MAAM,QAAQ,MAAO;YACxB,MAAM,+HAAM,CAAC,OAAO,CAAC;gBACnB,KAAK;gBACL,MAAM;oBAAC;oBAAW,KAAK,IAAI;oBAAE,KAAK,QAAQ;oBAAE,KAAK,KAAK;iBAAC;YACzD;QACF;QAEA,OAAO;YAAE,SAAS;YAAM;QAAQ;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;YAAE,OAAO;QAAuB;IACzC;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,oRAAO;IACjC,MAAM,SAAS,YAAY,GAAG,CAAC,YAAY;IAE3C,IAAI,CAAC,QAAQ;QACX,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,IAAI;QACF,aAAa;QACb,MAAM,eAAe,MAAM,+HAAM,CAAC,OAAO,CAAC;YACxC,KAAK,CAAC;;;;sCAI0B,CAAC;YACjC,MAAM;gBAAC,SAAS;aAAQ;QAC1B;QAEA,MAAM,SAAS,EAAE;QAEjB,KAAK,MAAM,YAAY,aAAa,IAAI,CAAE;YACxC,MAAM,QAAQ;YAYd,2BAA2B;YAC3B,MAAM,cAAc,MAAM,+HAAM,CAAC,OAAO,CAAC;gBACvC,KAAK;gBACL,MAAM;oBAAC,MAAM,EAAE;iBAAC;YAClB;YAEA,MAAM,QAAQ,YAAY,IAAI,CAAC,GAAG,CAAC,CAAA,OAAQ;YAM3C,OAAO,IAAI,CAAC;gBACV,GAAG,KAAK;gBACR;YACF;QACF;QAEA,OAAO;YAAE,SAAS;YAAM;QAAO;IACjC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;YAAE,OAAO;QAAuB;IACzC;AACF;;;IAjHsB;IAwDA;;AAxDA,yXAAA;AAwDA,yXAAA"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Elli0t/richard/.next-internal/server/app/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getCurrentUser as '00824fc64110358ac237a51bb948da87d61f0d5839'} from 'ACTIONS_MODULE0'\nexport {logoutUser as '00e2b77fe8922816ce6377beec75cdaf782e63b874'} from 'ACTIONS_MODULE0'\nexport {registerUser as '407d3b17a28c1ed7a11582f5838419db39e9bb25c3'} from 'ACTIONS_MODULE0'\nexport {loginUser as '407fe4477a674799f3a7590b1590a785bf93da7eb8'} from 'ACTIONS_MODULE0'\nexport {getUserOrders as '00e4842573d6861a61638e5a67320803d4f813f037'} from 'ACTIONS_MODULE1'\nexport {saveOrder as '40870bedd7b9e77a75e667575f1added96759c2a3b'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAIA"}}]
}